<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Packet Disarray]]></title>
  <link href="blog.packetdisarray.com/atom.xml" rel="self"/>
  <link href="blog.packetdisarray.com/"/>
  <updated>2014-05-19T16:01:08-07:00</updated>
  <id>blog.packetdisarray.com/</id>
  <author>
    <name><![CDATA[Bethany Long]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Unix Resource Limits]]></title>
    <link href="blog.packetdisarray.com/2014/05/19/ulimit/"/>
    <updated>2014-05-19T15:26:00-07:00</updated>
    <id>blog.packetdisarray.com/2014/05/19/ulimit</id>
    <content type="html"><![CDATA[<p>In Unix-like systems, the <code>ulimit</code> command lets you check resource limits. When
these limits are updated, they only apply to sessions started after the change.</p>

<pre><code>$ ulimit -a
core file size          (blocks, -c) unlimited
data seg size           (kbytes, -d) 524288
file size               (blocks, -f) unlimited
max locked memory       (kbytes, -l) 335262
max memory size         (kbytes, -m) 1004356
open files                      (-n) 128
pipe size            (512 bytes, -p) 1
stack size              (kbytes, -s) 4096
cpu time               (seconds, -t) unlimited
max user processes              (-u) 64
virtual memory          (kbytes, -v) 528384
</code></pre>

<p>The one that you probably want to pay the most attention to is &ldquo;max user
processes&rdquo;. Reducing it low enough will prevent a
<a href="http://en.wikipedia.org/wiki/Fork_bomb">fork bomb</a> from succeeding in making
your system unresponsive. However, setting it too low will keep users from doing
normal tasks, especially if that involves compiling programs. Depending on the
system&rsquo;s purpose and on whether a restrictive process limit is imposed on all
users or just a few, anywhere from 50 to 300 or so could be a good choice.</p>

<p>Linux and Unix OSs tend to err on the side of permissiveness where process
limits are concerned.</p>

<pre><code>$ ulimit -u
34290
</code></pre>

<p>Oops. Better fix that.</p>

<p>Resource limits can be changed for a single session by giving a value after the
command line flag for that limit. Once you lower a resource limit for a
session, you might not be able to raise it again unless you&rsquo;re root.</p>

<pre><code>$ ulimit -u 300
$ ulimit -u
300
$ ulimit -u 34290
-bash: ulimit: max user processes: cannot modify limit: Operation not permitted
</code></pre>

<p>If you want to change a resource limit for <em>all</em> new sessions, the method varies
by OS.</p>

<h2>Linux</h2>

<p><em>More info:</em> <code>man 5 limits.conf</code></p>

<h2>FreeBSD, NetBSD, OpenBSD</h2>

<p><em>More info:</em> <code>man 5 login.conf</code>, <code>man 1 cap_mkdb</code></p>
]]></content>
  </entry>
  
</feed>
